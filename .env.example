# ============================================================================
# FORUM API - Environment Configuration Example
# ============================================================================
# 
# This file demonstrates all available environment variables for the Forum API.
# 
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env (for development/production)
# 2. Copy this file to .test.env (for testing)
# 3. Replace placeholder values with your actual configuration
# 4. NEVER commit .env files to version control
# 5. Ensure .env files are in .gitignore
#
# ============================================================================
# HTTP SERVER CONFIGURATION
# ============================================================================

# Server hostname/IP address
# - Use 'localhost' or '127.0.0.1' for local development
# - Use '0.0.0.0' for Docker or production environments (auto-configured for prod)
# - Default: localhost (development), 0.0.0.0 (production)
HOST=localhost

# Server port number
# - Valid range: 1024-65535 (use 1024+ to avoid permission issues)
# - Common values: 3000 (development), 8080, 5000
# - Default: 3000
# - Important: Ensure port is not in use by other services
PORT=3000

# Node environment
# - development: Enable debugging, detailed logging, auto-reload
# - production: Performance optimized, minimal logging
# - test: Run with test database and test configuration
# - Default: development
# NODE_ENV=development


# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================

# Production/Development Database Configuration

# PostgreSQL hostname or IP address
# - localhost: Local database on same machine
# - 127.0.0.1: Loopback interface (equivalent to localhost)
# - db service: Docker Compose service name
# - Remote host: IP address or domain name for remote database
# Required: Yes
PGHOST=localhost

# PostgreSQL port number
# - Default PostgreSQL port: 5432
# - Change only if using non-standard port
# Required: Yes
PGPORT=5432

# PostgreSQL username
# - Create dedicated user for application (security best practice)
# - Avoid using 'postgres' superuser in production
# - Example: forum_api_user, app_user, developer
# Required: Yes
PGUSER=developer

# PostgreSQL password
# - Use strong password (min 12 characters, mix of upper/lower/numbers/symbols)
# - Generate: openssl rand -base64 32
# - NEVER use default or simple passwords in production
# - IMPORTANT: Store securely (use secrets manager in production)
# Required: Yes
# ⚠️  DEFAULT PASSWORD - CHANGE THIS IMMEDIATELY
PGPASSWORD=supersecretpassword

# PostgreSQL database name
# - Use descriptive name: forumapi, forum_api, forum_production
# - Different database for development vs production (security)
# - Keep database name lowercase and use underscores (PostgreSQL convention)
# Required: Yes
PGDATABASE=forumapi


# ============================================================================
# DATABASE CONFIGURATION - TEST ENVIRONMENT
# ============================================================================
# 
# Test database configuration is automatically loaded when NODE_ENV=test
# Use separate test database to avoid data corruption during testing
# Test data should be isolated from development/production data

# Test database hostname
# - Can be same as production DB (different database name)
# - Or separate test DB server for isolation
# Default: localhost
PGHOST_TEST=localhost

# Test database port
# Default: 5432
PGPORT_TEST=5432

# Test database username
# - Can be same as production user
# - Or separate test user with limited privileges
# Default: developer
PGUSER_TEST=developer

# Test database password
# Default: supersecretpassword
PGPASSWORD_TEST=supersecretpassword

# Test database name
# - MUST be different from production database
# - Test database can be safely dropped/recreated between test runs
# - Convention: append _test to production database name
# - Example: forumapi_test, forum_api_test
# Required: Yes
PGDATABASE_TEST=forumapi_test


# ============================================================================
# AUTHENTICATION - JWT CONFIGURATION
# ============================================================================
# 
# JSON Web Token (JWT) configuration for user authentication
# 
# SECURITY CONSIDERATIONS:
# - Keys should be long, random, cryptographically secure strings
# - Keys should NOT contain special characters that need escaping
# - Rotate keys periodically (impacts existing tokens)
# - Store keys securely (use environment secrets in production)
# - Never commit real keys to version control
# - Different keys for access and refresh tokens (security best practice)

# Access Token Secret Key
# - Used to sign and verify short-lived access tokens
# - Access tokens grant temporary API access
# - Typical lifespan: 15 minutes to 1 hour
# - Key requirements:
#   * Minimum 32 characters (256 bits)
#   * Should be cryptographically random
#   * Alphanumeric recommended (no special chars)
# - Generation: openssl rand -hex 32  (produces 64 hex chars)
# - Important: MUST be different from REFRESH_TOKEN_KEY
# Required: Yes
# ⚠️  EXAMPLE KEY - GENERATE YOUR OWN
ACCESS_TOKEN_KEY=8b7b4ef375716ab08b2a3951b29d52fc00b1c855f9d1a847229b8c5935bef56d9d271e76a9cf08e614300395c3b90ebe559cf968a0741b18c9505549394b2c70

# Refresh Token Secret Key
# - Used to sign and verify long-lived refresh tokens
# - Refresh tokens allow getting new access tokens
# - Typical lifespan: 7 days to 30 days
# - Key requirements: Same as ACCESS_TOKEN_KEY
# - Important: MUST be different from ACCESS_TOKEN_KEY
# - Should be stored more securely (longer rotation period)
# Required: Yes
# ⚠️  EXAMPLE KEY - GENERATE YOUR OWN
REFRESH_TOKEN_KEY=5078605e074a462b1460608fcbe0d0963c644402e04ad334455ff5a856cb43fd99825861dde02957d5e3184c90c532ca7d0249df20fe93d535632f3d11be7bad

# Access Token Expiration Time (in seconds)
# - How long an access token remains valid before requiring refresh
# - Format: seconds (integer)
# - Common values:
#   * 900 = 15 minutes
#   * 1800 = 30 minutes (balanced)
#   * 3000 = 50 minutes
#   * 3600 = 1 hour
# - Shorter duration = better security, more refresh requests
# - Longer duration = better UX, less token refresh overhead
# Default: 3000 (50 minutes)
# Recommended: 900-3600 seconds
ACCESS_TOKEN_AGE=3000


# ============================================================================
# OPTIONAL CONFIGURATION EXAMPLES
# ============================================================================
# 
# These are examples of additional configuration that could be added:

# Logging level
# - error, warn, info, debug, trace
# - Default: info
# LOG_LEVEL=info

# Database pool configuration
# - Max connections: 10-50 (depends on application scale)
# - Min connections: 2-5
# DB_POOL_MIN=2
# DB_POOL_MAX=10

# CORS configuration
# - Allowed origins for cross-origin requests
# CORS_ORIGIN=http://localhost:3001

# API rate limiting
# - Requests per minute per IP
# RATE_LIMIT_REQUESTS=100
# RATE_LIMIT_WINDOW_MS=60000


# ============================================================================
# SECURITY CHECKLIST
# ============================================================================
# 
# Before deploying to production:
# 
# ☐ Generate new JWT keys (openssl rand -hex 32)
# ☐ Change all passwords to strong values
# ☐ Use different database for production
# ☐ Use production-grade PostgreSQL (managed service)
# ☐ Enable PostgreSQL SSL/TLS connections
# ☐ Store .env in secure secret management system
# ☐ Never log sensitive values (passwords, keys, tokens)
# ☐ Use HTTPS/TLS for all API endpoints
# ☐ Implement rate limiting
# ☐ Enable CORS with specific origins
# ☐ Regular security audits and dependency updates
# ☐ Monitor access logs for suspicious activity
# ☐ Backup database regularly
# ☐ Document environment variable requirements
# ☐ Use principle of least privilege for database user


# ============================================================================
# REFERENCES & USEFUL COMMANDS
# ============================================================================
# 
# Generate secure random values:
#   openssl rand -hex 32        # 64-character hex string
#   openssl rand -base64 32     # 44-character base64 string
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# 
# PostgreSQL connection test:
#   psql -h localhost -U developer -d forumapi
# 
# Verify environment loading:
#   npm run dev                 # Loads .env automatically
#   NODE_ENV=test npm test      # Loads .test.env
# 
# Documentation:
#   - dotenv: https://github.com/motdotla/dotenv
#   - JWT Best Practices: https://tools.ietf.org/html/rfc8725
#   - PostgreSQL Security: https://www.postgresql.org/docs/current/sql-syntax.html

